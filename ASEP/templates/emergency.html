{% extends "index.html" %}

{% block title %}
Emergency Services
{% endblock title %}

{% block style %}
<link rel="stylesheet" href="/static/css/emergency.css">
{% endblock style %}

{% block body %}
<div class="search-container"  style="position: relative;">
    
    <form method = 'POST'>
        {% csrf_token %}
    <input type="text" placeholder="Search..." class="search-bar" id="search-bar" name = 'search'>
    <button class="search-button" type="submit" value="submit" >Search</button>
    <div id="suggestions" class="suggestions"></div> <!-- Suggestions box -->
</form>
</div>
<section class="emergency-services">
    {% for i in cardData %}
    <div id="service-card" class="Ecard">

        {% load static %}

        {% if i.catagory == 'Police Station' %}
        <img src="{% static 'img/police-station.png' %}" alt="Service Logo" class="Elogo" width="100" height="100">
        {% elif i.catagory == 'Hospital' %}
        <img src="{% static 'img/fire.png' %}" alt="Service Logo" class="Elogo" width="100" height="100">
        {% elif i.catagory == 'Fire' %}
        <img src="{% static 'img/fire.png' %}" alt="Service Logo" class="Elogo" width="100" height="100">
        {% endif %}




        <h2 class="Etitle">{{i.catagory}} Department</h2>
        <p class="description">Serving and protecting the {{i.area}} Area.</p>
        
        <div id="details" class="details hidden">
            <p><strong>Phone:</strong> {{i.phone}}</p>
            <p><strong>Email:</strong>{{i.email}}</p>
            <p><strong>Address:</strong><br>{{i.address|linebreaksbr}}</p>
        </div>
        
        <div class="buttons">
            <button onclick="toggleDetails(this)" class="btn btn-blue">View Details</button>
            <button onclick="visitService()" class="btn btn-green"><a href = "{{i.location}}">Visit</a></button>
        </div>
    </div>
        
    {% endfor %}
    

    <script>
        function toggleDetails(button) {
            const card = button.closest(".Ecard");
            const details = card.querySelector(".details");
            if (details.classList.contains("hidden")) {
                details.classList.remove("hidden");
                card.classList.add("expanded");
            } else {
                details.classList.add("hidden");
                card.classList.remove("expanded");
            }
        }
        
        
    </script>
    
</section>


</section>
{% endblock body %}
